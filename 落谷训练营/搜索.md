# æœç´¢

## P1036

è®©ä½ æ±‚çš„æ˜¯ï¼Œå’Œä¸ºå¥‡æ•°çš„ç»„åˆçš„ä¸ªæ•°

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <unordered_set>

using namespace std;

int n, k, res;
int w[23];
bool st[23];
unordered_set<int> ass;

void check(int x)
{
    if(x == 0 || x == 1)    return ;
    for(int i = 2; i <= x / i; i ++ )
        if(x % i == 0)  return ;
    // ass.insert(x);
    res ++ ;
}

void dfs(int u, int cnt, int sum)
{
    if(n - u + cnt < k) return ;
    if(cnt == k)  return check(sum);
    if(u == n)  return ;
    dfs(u + 1, cnt, sum);
    dfs(u + 1, cnt + 1, sum + w[u]);
}

int main()
{
    cin >> n >> k;
    for(int i = 0; i < n; i ++ )    cin >> w[i];
    dfs(0, 0, 0);
    cout << res << endl;
    return 0;
}
```



## P1101

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <queue>

using namespace std;

typedef pair<int, int> PII;
const int N = 110, M = 6;

int n;
char g[N][N];
int dx[8] = {0, 0, 1, 1, 1, -1, -1, -1};
int dy[8] = {1, -1, 0, 1, -1, 0, 1, -1};
bool res[N][N];
bool st[N][N];
string goal = "izhong#";

bool check(int a, int b)
{
    if(a < 0 || a >= n || b < 0 || b >= n || st[a][b])  return true;
    return false;
}

void dfs(int u, int sx, int sy, vector<PII> &path, int d)
{
    if(u == M)
    {
        for(auto [x,y] : path) res[x][y] = true;
        return ;
    }
    
    int a = sx + dx[d], b = sy + dy[d];
    if(check(a, b) || g[a][b] != goal[u]) return ;
    st[a][b] = true;
    path.push_back({a, b});
    dfs(u + 1, a, b, path, d);
    path.pop_back();
    st[a][b] = false;

}

int main()
{
    cin >> n;
    for(int i = 0; i < n; i ++ )    cin >> g[i];
    for(int i = 0; i < n; i ++ )
        for(int j = 0; j < n; j ++ )
            if(g[i][j] == 'y')
            {
                memset(st, false, sizeof st);
                vector<PII> path;
                path.push_back({i, j});
                for(int k = 0; k < 8; k ++ )
                    dfs(0, i, j, path, k);
            }
    for(int i = 0; i < n; i ++ )
    {
        for(int j = 0; j < n; j ++ )
            if(res[i][j])  cout << g[i][j];
            else    cout << "*";
        cout << endl;
    }
    return 0;
}
```

## P1135

``` C++
/* floyd æ€æƒ³ */
/* O(N^3) */
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

const int N = 210, INF = 0x3f3f3f3f;

int w[N], n, a, b;
int f[N][N];

int main()
{
    memset(f, 0x3f, sizeof f);
    cin >> n >> a >> b;
    for(int i = 1; i <= n; i ++ )  
    {
        cin >> w[i];
        f[i][i] = 0;
        if(i - w[i] >= 1)
            f[i][i - w[i]] = 1;
        if(i + w[i] <= n)
            f[i][i + w[i]] = 1;
    }
    f[0][0] = 0;
    for(int k = 1; k <= n; k ++ )
        for(int i = 1; i <= n; i ++ )
            for(int j = 1; j <= n; j ++ )
                f[i][j] = min(f[i][j], f[i][k] + f[k][j]);       
     
    if(f[a][b] == INF)   f[a][b] = -1;
    cout << f[a][b] << endl;
    return 0;
}
```

``` C++
/*bfs / dfs / spfa éƒ½å¯ä»¥*/

/*dfséœ€è¦å‰ªæ*/

/*å¦‚æœbfsçš„è¯ï¼Œ
æŠŠå®ƒæƒ³è±¡æˆç‰¹æ®Šçš„(æ¯æ¬¡åªèƒ½å‘å·¦å‘å³èµ°k[i]æ­¥)
ä¸€è¡Œnåˆ—çš„ç½‘æ ¼å³å¯*/
```

## P1162

``` C++
/* ä¸€å¼€å§‹çš„é”™è¯¯æ€è·¯
è¯•å›¾é€šè¿‡æŸä¸ªç‚¹ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘æœ‰æ²¡æœ‰1
æ¥åˆ¤æ–­è¿™ä¸ªç‚¹æ˜¯å¦è¢«1åŒ…å›´
ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ˜¯å¯è¡Œçš„ï¼Œä½†åœ¨ä¸‹é¢caseä¸­ï¼Œä¸è¡Œï¼›
8
1 1 1 1 1 1 1 1 1 1 1 1
1                     1
1   1 1 1 1 1  1 1    1
1   1 x x        1    1
1   1 1 1        1    1
1       1        1    1
1 1 1 1 1        1 1  1
ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œæˆ‘ä»¬è®©å‡ºé”™çš„ 0 ç”¨ x ä»£æ›¿
è¿™ä¸¤ä¸ª0 æ²¡æœ‰è¢« 1 åŒ…å›´èµ·æ¥ï¼Œä½†æ˜¯å®ƒçš„ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘éƒ½æœ‰1
*/
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

const int N = 40;

int n, g[N][N];
bool _left[N][N], _right[N][N], _up[N][N], _low[N][N];

void init(int x, int y)
{
    // [1,x-1] [x,n]
    // [1,y-1],[y,n]
    for(int i = 1; i <= x - 1; i ++ )   _low[i][y] = true;
    for(int i = x + 1; i <= n; i ++ )   _up[i][y] = true;
    for(int i = 1; i <= y - 1; i ++ )   _right[x][i] = true;
    for(int i = y + 1; i <= n; i ++ )   _left[x][i] = true;
}

bool check(int x, int y)
{
    return _low[x][y] && _up[x][y] && _left[x][y] && _right[x][y];
}

int solve(int x, int y)
{
    if(g[x][y] == 1)    return 1;
    if(check(x, y)) return 2;
    return 0;
}

int main()
{
    cin >> n;
    for(int i = 1; i <= n; i ++ )
        for(int j = 1; j <= n; j ++ )
        {
            cin >> g[i][j];
            if(g[i][j] == 1)    init(i, j);
        }
    
    for(int i = 1; i <= n; i ++ )
    {
        for(int j = 1; j <= n; j ++ )
            cout << solve(i, j) << ' ';
        cout << endl;
    }
    
    return 0;
}

/*æ­£è§£*/

```



## P1433

``` C++
/*æš´æœ+å‰ªæ ï¼Œ70%*/
#include <iostream>
#include <cstring>
#include <algorithm>
#include <cmath>

using namespace std;

const int N = 410;
typedef pair<int, int> PII;

#define x first
#define y second

int n;
PII p[N];
double d[N][N];
bool st[N];
double res = 2e9, minx = 2e9;

void dfs(int u, int pre, double cur)
{
    if(cur >= res)  return ;
    if(u == n)
    {
        res = cur;
        return ;
    }
    if(cur + minx >= res) return ;
    for(int i = 0; i < n; i ++ )
    {
        if(!st[i])
        {
            st[i] = true;
            dfs(u + 1, i, cur + d[pre][i]);
            st[i] = false;
        }
    }
}

int main()
{
    scanf("%d", &n);
    // x,y -> [0, 400]
    for(int i = 0; i < n; i ++ )   
    {
        scanf("%d%d", &p[i].x, &p[i].y);
        p[i].x += 200;
        p[i].y += 200;
    }
    
    for(int i = 0; i < n; i ++ )
        for(int j = i + 1; j < n; j ++ )    
        {
            int dx = p[i].x - p[j].x;
            int dy = p[i].y - p[j].y;
            d[j][i] = d[i][j] = sqrt(dx * dx + dy * dy);
            minx = min(d[i][j], minx);
        }

    for(int i = 0; i < n; i ++ )
    {
        int dx = p[i].x - 200;
        int dy = p[i].y - 200;
        int k = dx * dx + dy * dy;

        st[i] = true;
        double t = sqrt(k);
        dfs(1, i, t);
        st[i] = false;
    }
    
    printf("%.2lf\n", res);
    
    return 0;
}


/* æ­£è§£ï¼ŒçŠ¶æ€å‹ç¼©dpã€‚
O(!15) å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œæš´åŠ›æœç´¢çœ‹èµ·æ¥å°±ä¸å¤ªè¡Œ
*/


```

## P1443

``` C++
// æ³¨æ„é¢˜ç›®è¯´çš„é©¬æ˜¯è±¡æ£‹é‡Œé¢çš„ğŸï¼ŒğŸèµ°æ—¥
#include <iostream>
#include <cstring>
#include <algorithm>
#include <queue>

using namespace std;

const int N = 410;
typedef pair<int, int> PII;

int sx, sy;
int n, m;
int d[N][N];
int dx[] = {2, 2, -2, -2, 1, 1, -1, -1};
int dy[] = {-1, 1, -1, 1, 2, -2, 2, -2};

void bfs()
{
    d[sx][sy] = 0;
    queue<PII> q;
    q.push({sx, sy});
    while(q.size())
    {
        auto [x,y] = q.front(); q.pop();
        for(int i = 0; i < 8; i ++ )
        {
            int a = x + dx[i], b = y + dy[i];
            if(a < 1 || a > n || b < 1 || b > m || d[a][b] != -1) continue;
            d[a][b] = d[x][y] + 1;
            q.push({a, b});
        }
    }
}

int main()
{
    memset(d, -1, sizeof d);
    cin >> n >> m;
    cin >> sx >> sy;
    bfs();
    for(int i = 1; i <= n; i ++ )
    {
        for(int j = 1; j <= m; j ++ )
            cout << d[i][j] << ' ';
        cout << endl;
    }
    return 0;
}
```



## P1596

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

const int N = 110;

int n, m, res;
bool st[N][N];
char g[N][N];

int dx[8] = {0, 0, 1, 1, 1, -1, -1, -1};
int dy[8] = {1, -1, 0, 1, -1, 0, 1, -1};

void dfs(int x, int y)
{
    st[x][y] = true;
    for(int i = 0; i < 8; i ++ )
    {
        int a = x + dx[i], b = y + dy[i];
        if(a < 0 || a >= n || b < 0 || b >= m 
            || st[a][b] || g[a][b] == '.')    continue;
        dfs(a, b);
    }
}

int main()
{
    cin >> n >> m;
    for(int i = 0; i < n; i ++ )    cin >> g[i];
    for(int i = 0; i < n; i ++ )
        for(int j = 0; j < m; j ++ )
            if(g[i][j] == 'W' && !st[i][j])
            {
                dfs(i, j);
                res ++ ;
            }
    cout << res << endl;
    return 0;
}
```



## P1605

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <set>

using namespace std;

typedef pair<int, int> PII;

int n, m, k, res;
int sx, sy, ex, ey;
set<PII> ass;
bool st[10][10];
int dx[4] = {-1, 0, 1, 0};
int dy[4] = {0, 1, 0, -1};

void dfs(int x, int y)
{
    if(x == ex && y == ey)
    {
        res ++ ;
        return ;
    }
    for(int i = 0; i < 4; i ++ )
    {
        int a = x + dx[i], b = y + dy[i];
        if(a < 1 || a > n || b < 1 || b > m)   continue;
        if(st[a][b] || ass.count({a, b}))    continue;
        st[a][b] = true;
        dfs(a, b);
        st[a][b] = false;
    }
}

int main()
{
    cin >> n >> m >> k;
    cin >> sx >> sy >> ex >> ey;
    bool flag = true;
    while(k -- )
    {
        int a, b;
        cin >> a >> b;
        // ç‰¹åˆ¤éšœç¢ç‚¹å°±æ˜¯èµ·ç‚¹æˆ–è€…ç»ˆç‚¹
        if(a == sx && b == sy)   flag = false;
        if(a == ex && b == ey)   flag = false;
        ass.insert({a, b});
    }
    
    if(flag)    
    {
        // åˆ«å¿˜äº†æ ‡è®°èµ·ç‚¹
        st[sx][sy] = true;
        dfs(sx, sy);
    }
    cout << res << endl;
    return 0;
}
```

## P1825

``` C++
/* å…³äºä¼ é€é—¨çš„å¤„ç†ï¼Œå¾ˆæ¶å¿ƒã€‚
é¢˜ç›®è¯´çš„æ˜¯ï¼Œå¦‚æœä½ èµ°åˆ°äº†ä¼ é€é—¨ï¼Œå°±å¿…é¡»ä¼ é€ï¼Œå¹¶ä¸”ä¼ é€ä¸éœ€è¦èŠ±è´¹è·ç¦»ã€‚
æ³¨æ„äº†ï¼Œå½“æˆ‘ä»¬å‡ºå…¥ä¼ é€é—¨åï¼Œdistance æ˜¯ä¸å˜çš„ï¼
æˆ‘åœ¨è¿™ä¸ªåœ°æ–¹å‘äº†ä¸€ä¸ªå¤šå°æ—¶
*/

#include <iostream>
#include <cstring>
#include <algorithm>
#include <queue>
#include <vector>
#include <map>

using namespace std;

const int N = 310;
typedef pair<int, int> PII;

// é¢˜ç›®è§„å®šä¸€å®šæœ‰è§£
// å¦‚æœä¸€å¤´å¥¶ç‰›å¤„åœ¨è¿™ä¸ªè£…ç½®çš„èµ·ç‚¹æˆ–è€…ç»ˆç‚¹ï¼Œè¿™å¤´å¥¶ç‰›å°±å¿…é¡»ä½¿ç”¨è¿™ä¸ªè£…ç½®ã€‚

/*æˆ‘ä»¬éœ€è¦ææ¸…æ¥šä¸€ç‚¹ï¼Œä¼ é€è£…ç½®æ˜¯å¦ä¼šå¯¼è‡´bfså¤±æ•ˆï¼Ÿ
ä¼šï¼Œå› ä¸ºbfséšè—çš„ä¸€ä¸ªæ¡ä»¶æ˜¯æ­¥é•¿ä¸º1
ä½†æ˜¯ä¼ é€è£…ç½®çš„æ­¥é•¿ä¸º0
å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨åŒç«¯é˜Ÿåˆ—
*/

int n, m;
int sx, sy, ex, ey;
char g[N][N];
int dx[4] = {1, 0, -1, 0};
int dy[4] = {0, 1, 0, -1};
vector<PII> pos[26];
int d[N][N];
map<PII, PII> mp;
int cnt;

bool check(int a, int b)
{
    if(a < 0 || a >= n || b < 0 || b >= m)  return false;
    if(g[a][b] == '#')  return false;
    if(d[a][b]) return false;
    return true;
}

int bfs()
{
    deque<PII> q;
    q.push_front({sx, sy});
    g[sx][sy] = '#';
    
    while(q.size())
    {
        auto [x,y] = q.front(); 
        q.pop_front();
        int distance = d[x][y];
        
        if(x == ex && y == ey)  return distance;
        if(g[x][y] >= 'A' && g[x][y] <= 'Z') // ä¼ é€é—¨
        {
            // ä¸å¯ä»¥ç›´æ¥è®©x=mp[{x,y}].first
            // å¦åˆ™ b=mp[{x,y}].second æ—¶ï¼Œxå°±ä¸æ˜¯åŸæ¥çš„xäº†
            int a = mp[{x,y}].first;
            int b = mp[{x,y}].second;
            x = a, y = b;
        }
        for(int i = 0; i < 4; i ++ )
        {
            int a = x + dx[i], b = y + dy[i];
            if(!check(a, b)) continue;
            d[a][b] = distance + 1;
            q.push_back({a, b});
        }
    }
    
    return -1;
}

int main()
{
    cin >> n >> m;
    for(int i = 0; i < n; i ++ )
    {
        cin >> g[i];
        for(int j = 0; j < m; j ++ )
        {
            if(g[i][j] == '@') sx = i, sy = j;
            if(g[i][j] == '=')  ex = i, ey = j;
            if(g[i][j] >= 'A' && g[i][j] <= 'Z')
                pos[g[i][j] - 'A'].push_back({i, j});
        }
    }
    for(int i = 0; i < 26; i ++ )
    {
        if(pos[i].size())
        {
            mp[pos[i][1]] = pos[i][0];
            mp[pos[i][0]] = pos[i][1];
        }
    }
    cout << bfs() << endl;
    return 0;
}
```

## P2036

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <cmath>

using namespace std;

int n, w[11][2];
int res = 2e9;

void dfs(int u, int l, int r, bool flag)
{
    if(u == n)
    {
        if(!flag)   return ;    // ç‰¹åˆ¤ä¸é€‰çš„æƒ…å†µ
        res = min(res, abs(l - r));
        return ;
    }
    dfs(u + 1, l * w[u][0], r + w[u][1], 1);
    dfs(u + 1, l, r, flag);
}

int main()
{
    cin >> n;
    for(int i = 0; i < n; i ++ )  
    {
        cin >> w[i][0] >> w[i][1];
        res = min(res, abs(w[i][1] - w[i][0]));
    }
    dfs(0, 1, 0, 0);
    cout << res << endl;
    return 0;
}
```



## P2392

``` C++
// æˆ‘ä»¬å¯ä»¥æŠŠå·¦å³è„‘åŒæ—¶è®¡ç®—ç†è§£ä¸ºä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ

// ä¸‹é¢æ˜¯é”™è¯¯çš„æ€è·¯
// å…¸å‹çš„ä¾‹å­ï¼š3ï¼Œ3ï¼Œ2ï¼Œ2ï¼Œ2
// èŠ±è´¹çš„æ—¶é—´åº”è¯¥æ˜¯ 6ï¼Œä½†æˆ‘çš„ä»£ç ä¼šç®—å‡ºæ¥ 7
// æˆ‘çŒœæµ‹ï¼Œæ¯æ¬¡é€‰å–ä¸¤ä¸ªæœ€å¤§å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœ€åå‰©ä¸‹æ¥ä¸€ä¸ªæ•°
// åŸæœ¬è¿™ä¸ªæ•°å¯ä»¥è¢«å¹¶å‘æ‰§è¡Œçš„
// ä½†æ˜¯ç°åœ¨è¦å•ç‹¬æ‰§è¡Œäº†

// æ­£ç¡®çš„è´ªå¿ƒæ€è·¯åº”è¯¥æ˜¯å°† {3,3,2,2,2} åˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºé—´
// å¹¶ä¸”ä½¿å¾—è¿™ä¸¤ä¸ªåŒºé—´çš„å·®å€¼å°½å¯èƒ½çš„å°
// è¿™æ ·å¹¶å‘ç¨‹åº¦å°±å°½å¯èƒ½çš„å¤§äº†
#include <iostream>
#include <cstring>
#include <algorithm>
#include <queue>

using namespace std;

long long res = 0;
priority_queue<int> q;

void solve()
{
    while(q.size())
    {
        int a = -1, b = -1;
        a = q.top();   q.pop();
        // cout << "size: " << q.size() << endl;
        if(q.size())
        {
            b = q.top();    
            q.pop();
        }
        // cout << "a: " << a << ' ' << "b: " << b << endl;
        if(b == -1) res += a;
        else 
        {
            int t = min(a, b);
            res += t;
            a -= t, b -= t;
            if(a > 0)   q.push(a);
            if(b > 0)   q.push(b);
        }
    }
}

int main()
{
    int cnt[4];
    for(int i = 0; i < 4; i ++ )    cin >> cnt[i];
    for(int i = 0; i < 4; i ++ )
    {
        for(int j = 0; j < cnt[i]; j ++ )
        {
            int x;  cin >> x;
            q.push(x);
        }
        solve();
        // cout << "res: " << res << endl;
    }
    cout << res << endl;
    return 0;
}


/* æ­£ç¡®ä»£ç ï¼Œdfs */
/* æ—¶é—´å¤æ‚åº¦ O(60*2^20) -> O(6e7) */

#include <iostream>
#include <cstring>
#include <algorithm>
#include <cmath>

using namespace std;

int cnt[4];
int w[23][63];
int ans;

void dfs(int id, int u, int n, int l, int r)
{
    if(u == n)
    {
        // cout << l << ' ' << r << endl;
        ans = min(max(l, r), ans);
        return ;
    }
    dfs(id, u + 1, n, l + w[id][u], r);
    dfs(id, u + 1, n, l, r + w[id][u]);
}

int main()
{
    for(int i = 0; i < 4; i ++ )    cin >> cnt[i];
    for(int i = 0; i < 4; i ++ )
        for(int j = 0; j < cnt[i]; j ++ )   
            cin >> w[i][j];
    
    int res = 0;
    for(int i = 0; i < 4; i ++ )
    {
        ans = 0x3f3f3f3f;
        dfs(i, 0, cnt[i], 0, 0);
        res += ans;
        // cout << "ans: " << ans << endl;
    }
    cout << res << endl;
    return 0;
}

/* æ­£ç¡®ä»£ç ï¼Œdp */
/* æ—¶é—´å¤æ‚åº¦ O(60* 20*60*20 ) -> O(1e6) */
/* è¿™åº”è¯¥æ˜¯ dp æ¯”è¾ƒå¸¸è§çš„ä¸€ç§åº”ç”¨äº†ï¼š
ç»™å®š k ä¸ªç‰©å“ï¼Œåˆ¤æ–­èƒ½å¦ç»„åˆå‡ºä»·å€¼ä¸º s çš„ç»„åˆ
æˆ‘ä»¬å¯ä»¥è§„å®šï¼Œæ¯ä¸ªç‰©å“çš„ä½“ç§¯ç­‰äºä»·å€¼
é‚£ä¹ˆå½“ f[i][j] == j æ—¶ï¼Œå°±å­˜åœ¨ i ä¸ªç‰©å“ç»„åˆå‡ºä»·å€¼ä¸º j çš„ç»„åˆ
è¿™å°±æ˜¯ 01 èƒŒåŒ…æ¨¡å‹
 */
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

int cnt[4], sum[4];
int w[63][23];
int f[63 * 23];
// f[i][j] è¡¨ç¤ºä»å‰ i ä¸ªä½œä¸šé‡Œé¢é€‰ï¼Œä½“ç§¯ä¸º j æ—¶çš„æœ€å¤§ä»·å€¼
// è¿™é‡Œï¼Œæ¯ä¸ªä½“ç§¯å¤§å°å°±ç­‰äºä»·å€¼ï¼Œå› æ­¤ï¼Œä½“ç§¯ä¸º jï¼Œæœ€å¤§ä»·å€¼å°±ä¸º j
// å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸ºä¸€ç»´èƒŒåŒ…
// 

int solve(int u)
{
    memset(f, 0, sizeof f); // åˆ«å¿˜äº†æ¯æ¬¡è°ƒç”¨éƒ½åˆå§‹åŒ–
    int n = cnt[u], m = sum[u];
    
    for(int i = 1; i <= n; i ++ )
        for(int j = m; j >= w[u][i]; j -- )
            f[j] = max(f[j], f[j - w[u][i]] + w[u][i]);
    
    int ans = 2e9;
    for(int j = 1; j <= m; j ++ )
        if(f[j] == j)
            ans = min(ans, max(j, m - j));

    return ans;
}

int main()
{
    for(int i = 0; i < 4; i ++ )    cin >> cnt[i];
    for(int i = 0; i < 4; i ++ )
        for(int j = 1; j <= cnt[i]; j ++ )
        {
            cin >> w[i][j];
            sum[i] += w[i][j];
        }
    int res = 0;
    for(int i = 0; i < 4; i ++ )
        res += solve(i);
    cout << res << endl;
    return 0;
}

```



## P2404

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <vector>

using namespace std;

void dfs(int u, int s, vector<int> path)
{
    if(!s)
    {
        int n = path.size();
        if(n == 1)  return ;
        for(int i = 0; i < n; i ++ )
            cout << path[i] << "+\n"[i == n - 1];
        return ;
    }
    if(u > s)   return ;
    
    // i==0 æ—¶ç›¸å½“äºä¸é€‰
    for(int i = s / u; i >= 0; i -- )
    {
        for(int j = 0; j < i; j ++ )
            path.push_back(u);
        dfs(u + 1, s - i * u, path);
        for(int j = 0; j < i; j ++ )
            path.pop_back();
    }
}

int main()
{
    vector<int> path;
    int n;  cin >> n;
    dfs(1, n, path);
    return 0;
}
```



## P2895

``` C++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <queue>

using namespace std;

typedef pair<int, int> PII;
const int N = 310;

int w[N][N], d[N][N];
bool st[N][N];
int dx[4] = {1, 0, -1, 0};
int dy[4] = {0, 1, 0, -1};

void add(int a, int b, int c)
{
    w[a][b] = min(w[a][b], c);
    for(int i = 0; i < 4; i ++ )
    {
        int x = a + dx[i], y = b + dy[i];
        if(x < 0 || x >= N || x < 0 || x >= N)  continue;
        w[x][y] = min(w[x][y], c);
    }
}

int bfs()
{
    queue<PII> q;
    q.push({0, 0});
    st[0][0] = true;
    while(q.size())
    {
        auto [x,y] = q.front(); q.pop();
        if(w[x][y] == 0x3f3f3f3f)   return d[x][y];
        for(int i = 0; i < 4; i ++ )
        {
            int a = x + dx[i], b = y + dy[i];
            if(a < 0 || b < 0 || a >= N || b >= N || st[a][b]) continue;
            if(d[x][y] + 1 >= w[a][b])  continue;
            d[a][b] = d[x][y] + 1;
            q.push({a, b});
            st[a][b] = true;
        }
    }
    return -1;
}

int main()
{
    memset(w, 0x3f, sizeof w);
    int n;  cin >> n;
    while (n -- )
    {
        int a, b, c;
        cin >> a >> b >> c;
        add(a, b, c);
    }
    cout << bfs() << endl;
    return 0;
}
```

